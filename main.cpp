/** * main.c */
#include "psdu.h"
#include <cstring>
#include <iostream>


int main(void)
{
    const char* bitVector = "0000000100100011010001010110011110001001101001011001111000100110100101100111100010011010010110011110001001101010111100110111101111000000010010001101000101011001111000100110101011110011011110111100000001001000110100010101100111100010011010101111001101111011110000000100100011010001010110011110001001101010111100110111101110000000100100011010001010110011110001001101010111100110111101111000000010010001101000101011001111000100110101011110011011110111100000001001000110100010101100111100010011010101111001101111011110000000100100011010001010110011110001001101010111100110111101111000000010010001101000101011001111000100110101011110011011110111100000001001000110100010101100111100010011010101111001101111011110000000100100011010001010110011110001001101010111100110111101111000000010010001101000101011001111000100110101011110011011110111100000001001000110100010101100111100010011010101111001101111011110000000100100011010001010110011110001001101010111100110111101111000000010010001101000101011001111000100110101011110011011110111100000001001000110100010101100111100010011010101111001101111011110000000100100011010001010110011110001001101010111100110111101111";
    halow::modParams params(1, halow::CBW2, halow::SU, halow::SHORT_GI, 5);

    halow::psdu generate_data_field;

    std::vector<std::complex<double>> payload = generate_data_field.build_psdu( bitVector, params);

    //print the symbols
    for(int s = 0; s<params.length; s++)
    {
        for (int i =0; i< params.Nsa + 16; i++ )
        {
            std::cout<< "time sample " <<i<< " "<< payload[s*80+i]<<std::endl;
        }

        std::cout<<std::endl;
    }

    return 0;
}

